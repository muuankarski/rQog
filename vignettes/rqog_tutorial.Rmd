---
title: "rqog-package for R"
output: html_document
---


<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{rqog Markdown Vignette made with knitr}
-->


`compiled at` `r Sys.time()`


*Download data from the Quality of Government Institute data*

Quotation from [ Quality of Governance institute website](http://www.qog.pol.gu.se/)

>The QoG Institute was founded in 2004 by Professor Bo Rothstein and Professor SÃ¶ren Holmberg. It is an independent research institute within the Department of Political Science at the University of Gothenburg. We conduct and promote research on the causes, consequences and nature of Good Governance and the Quality of Government (QoG) - that is, trustworthy, reliable, impartial, uncorrupted and competent government institutions.

>The main objective of our research is to address the theoretical and empirical problem of how political institutions of high quality can be created and maintained. A second objective is to study the effects of Quality of Government on a number of policy areas, such as health, the environment, social policy, and poverty. We approach these problems from a variety of different theoretical and methodological angles.

**Quality of Government institute** provides data in five different data sets, both in cross-sectional and longitudinal versions:

1. [QoG Basic Data](http://www.qog.pol.gu.se/data/datadownloads/qogbasicdata/)
2. [QoG Standard Data](http://www.qog.pol.gu.se/data/datadownloads/qogstandarddata/)
3. [QoG OECD Data](http://qog.pol.gu.se/data/datadownloads/qogoecddata)
4. [QoG Expert Survey Data](http://www.qog.pol.gu.se/data/datadownloads/qogexpertsurveydata/) 
5. [QoG EU Regional Data](http://www.qog.pol.gu.se/data/datadownloads/qogeuregionaldata/)


**rqog**-package provides access to **Basic**, **Standard** and **OECD** datasets through function `read_qog()`. **Standard** data has all the same indicators as in **Basic** data (241 variables) and an additional ~2300 indicators. Both **basic** and **standard** datasets have 211 countries. **OECD** dataset has 1274 indicators from 34 countries. **rqog** uses *longitudinal* datasets by default that have time-series of varying duration from majority of the indicators and countries.

Quality of Government Institute provides codebooks for all datasets: 

1. [Basic data codebook](http://www.qogdata.pol.gu.se/data/qog_bas_jan16.pdf)
2. [Standard data codebook](http://www.qogdata.pol.gu.se/data/qog_std_jan16.pdf)
3. [OECD data codebook](http://www.qogdata.pol.gu.se/data/qog_oecd_jan16.pdf)

You consult the codebooks for description of the data and indicators.

## Installation

```{r, eval=FALSE, message=FALSE}
library(devtools)
install_github("ropengov/rqog")
library(rqog)
```

## Examples

### Basic Data

Basic data has a limited selection of most common indicators. Below is an example on how to extract data on population and Democracy (Freedom House/Polity) index from BRIC-countries from 1990 to 2010 and to plot it.


```{r ExampleBasic, cache=FALSE, message=FALSE,warning=FALSE, eval=TRUE, fig.width=12}
library(rqog)
# Download a local coppy of the file
dat <- read_qog(which.data="basic", data.type = "time-series")
# Subset the data
dat2 <- dat[dat$year %in% 1990:2010 & dat$cname %in% c("Russia","China","India","Brazil"),
             c("cname","year","fh_ipolity2","wdi_pop")]
# gather to long format
library(tidyr)
dat.l <- gather(dat2, "var", "value", 3:4)
dat.l <- dat.l[!is.na(dat.l$value), ]
# Plot the data
library(ggplot2)
ggplot(dat.l, aes(x=year,y=value,color=cname)) + 
  geom_point() + geom_line() +
  geom_text(data=merge(dat.l,aggregate(year ~ cname, dat.l, max),
                     by=c("year","cname")),
          aes(x=year,y=value,label=cname),
          hjust=1,vjust=-1,size=3,alpha=.8) +
  facet_wrap(~var, scales="free") +
  theme(legend.position="none")
```


### Standard data

Standard data includes roughly 2500 indicators. Below is an example on how to extract data on *Environmental Performance Index*  and *Party of Chief Executive: How Long in Office* from BRIC-countries and plot it.


```{r ExampleStandard, cache=FALSE, message=FALSE,warning=FALSE, eval=TRUE, fig.width=12}
library(rqog)
# Download a local coppy of the file
dat <- read_qog("standard", "time-series")
# Subset the data
dat2 <- dat[dat$cname %in% c("Russia","China","India","Brazil") & dat$year %in% 2000:2010, c("cname","year","epi_epi","dpi_hlio")]
# gather to long format
library(tidyr)
dat.l <- gather(dat2, "var", "value", 3:4)
dat.l <- dat.l[!is.na(dat.l$value), ]
# Plot the data
library(ggplot2)
ggplot(dat.l, aes(x=year,y=value,color=cname)) + 
  geom_point() + geom_line() +
  geom_text(data=merge(dat.l,aggregate(year ~ cname, dat.l, max),
                     by=c("year","cname")),
          aes(x=year,y=value,label=cname),
          hjust=1,vjust=-1,size=3,alpha=.8) +
  facet_wrap(~var, scales="free") +
  theme(legend.position="none")
```

### OECD data

OECD data includes 1199 variables, but from a smaller number of wealthier countries of 34. In the example below four indicators:

1. Total social expenditure (public) `oecd_socexpnd_t1a`
2. Income inequality: Gini coefficient; level; late 2000s `oecd_incinequal_t1a`
3. Gross national income per capita `oecd_natinccap_t1`
4. General government debt `oecd_govdebt_t1`

We will include all the countries and all the years included in the data.


```{r ExampleSocialPolicy, cache=FALSE, message=FALSE,warning=FALSE, eval=TRUE, fig.width=12}
library(rqog)
# Download a local coppy of the file
dat <- read_qog("oecd", "time-series")
# Subset the data
dat2 <- dat[c("cname","year","oecd_socexpnd_t1a",
                            "oecd_incinequal_t1a",
                            "oecd_natinccap_t1",
                            "oecd_govdebt_t1")]
# gather to long format
library(tidyr)
dat.l <- gather(dat2, "var", "value", 3:6)
dat.l <- dat.l[!is.na(dat.l$value), ]
library(ggplot2)
# Plot the data
ggplot(dat.l, aes(x=year,y=value,color=cname)) + 
  geom_point() + geom_line() +
  geom_text(data=merge(dat.l,aggregate(year ~ cname, dat.l, max),
                     by=c("year","cname")),
          aes(x=year,y=value,label=cname),
          hjust=1,vjust=-1,size=3,alpha=.8) +
  facet_wrap(~var, scales="free") +
  theme(legend.position="none")
```


```{r}
sessionInfo()
```
